<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gemini Chat</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside class="conversation-drawer" aria-label="Conversation history">
        <header class="drawer-header">
          <h1>Gemini Chat</h1>
          <button class="new-chat" id="newConversation" type="button">New chat</button>
        </header>
        <div class="drawer-controls">
          <button class="drawer-button" id="settingsToggle" type="button" aria-haspopup="dialog">âš™ Settings</button>
          <button class="drawer-button" id="refreshModels" type="button">â†º Refresh models</button>
        </div>
        <nav class="conversation-list" id="conversationList" aria-live="polite"></nav>
      </aside>
      <main class="chat-surface">
        <header class="chat-toolbar">
          <div class="chat-title">
            <h2 id="activeConversationTitle">New Conversation</h2>
            <span id="modelBadge" class="model-badge" aria-live="polite"></span>
          </div>
          <div class="toolbar-actions">
            <button class="toolbar-button" id="audioToggle" type="button" aria-pressed="false">ðŸŽ™ Start voice</button>
            <button class="toolbar-button" id="ttsToggle" type="button" aria-pressed="false">ðŸ”Š Read replies</button>
          </div>
        </header>
        <section class="chat-log" id="chatLog" aria-live="polite"></section>
        <footer class="composer">
          <div class="attachment-preview" id="attachmentPreview"></div>
          <form id="composerForm" autocomplete="off">
            <label class="visually-hidden" for="messageInput">Message</label>
            <textarea id="messageInput" placeholder="Send a message..." rows="1"></textarea>
            <div class="composer-actions">
              <label class="upload" for="imageInput" title="Attach image">
                <input id="imageInput" type="file" accept="image/*" hidden />
                ðŸ“Ž
              </label>
              <button id="sendButton" type="submit">Send</button>
            </div>
          </form>
        </footer>
      </main>
    </div>

    <dialog class="settings-panel" id="settingsPanel" aria-labelledby="settingsTitle">
      <form method="dialog" class="settings-container" id="settingsForm">
        <header>
          <h2 id="settingsTitle">Settings</h2>
        </header>
        <section>
          <label for="apiKeyInput">API key</label>
          <input id="apiKeyInput" type="password" autocomplete="off" placeholder="Enter your Gemini API key" />
          <p class="hint">Stored locally in your browser.</p>
        </section>
        <section>
          <label for="apiBaseInput">API base URL</label>
          <input id="apiBaseInput" type="url" placeholder="https://generativelanguage.googleapis.com/v1beta" />
        </section>
        <section>
          <label for="modelSelect">Model</label>
          <select id="modelSelect">
            <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
            <option value="gemini-1.0-pro">Gemini 1.0 Pro</option>
          </select>
        </section>
        <section>
          <label for="temperatureInput">Temperature <span id="temperatureValue"></span></label>
          <input id="temperatureInput" type="range" min="0" max="2" step="0.1" value="0.7" />
        </section>
        <section>
          <label for="voiceSelect">Voice (for speech)</label>
          <select id="voiceSelect"></select>
        </section>
        <menu class="settings-actions">
          <button value="cancel" type="reset">Cancel</button>
          <button value="default" type="button" id="resetSettings">Reset</button>
          <button value="confirm" type="submit">Save</button>
        </menu>
      </form>
    </dialog>

    <template id="conversationListItemTemplate">
      <button class="conversation-item" type="button">
        <div class="item-title"></div>
        <div class="item-meta"></div>
      </button>
    </template>

    <template id="messageTemplate">
      <article class="message">
        <div class="avatar" aria-hidden="true"></div>
        <div class="content">
          <div class="content-body"></div>
          <div class="content-meta"></div>
        </div>
      </article>
    </template>

    <script src="script.js" type="module"></script>
  </body>
</html>
